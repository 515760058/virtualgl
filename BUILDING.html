<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type"><style>
<!--
h1           { font-family: Arial; font-size: 24pt; font-weight: bold }
h2           { font-family: Arial; text-decoration: underline; font-size: 18pt; font-style: 
               italic }
h3           { font-family: Arial; font-size: 14pt }
-->
</style><title>How to Build VirtualGL</title></head>
<body><h1>How to build VirtualGL in 9043 easy steps</h1>
<hr><h2><span style="font-weight: 400;">Prerequisites - Linux</span></h2>
<h3><span style="font-weight: 400;">OpenSSL headers and link libraries</span></h3>
<ul><li>
  <h4><span style="font-weight: 400;">On most Linux variants, these can be found in the <span style="font-family: monospace;">openssl-devel</span> 
  package included with the distribution.&nbsp; If your Linux distribution does 
  not contain a pre-packaged version of OpenSSL,
   you will need to build and install the toolkit from source.&nbsp; The source code
   can be obtained from <a href="http://www.openssl.org/">http://www.openssl.org/</a>.</span></h4>
  </li></ul><h3><span style="font-weight: 400;">GCC and G++ (tested with v2.96, v3.2,&nbsp;and v3.4)</span></h3>
<h3><span style="font-weight: 400;">X11 dev. kit</span></h3>
<ul>
  <li>On most Linux variants, this can be found in the <span style="font-family: monospace;">XFree86-devel</span> or 
  <span style="font-family: monospace;">xorg-x11-devel</span> package</li>
</ul>
<h3><span style="font-weight: 400;">GNU Make (tested with v3.7 &amp; later)</span></h3><h3 style="font-weight: normal;">TurboJPEG</h3><ul><li>Download
and install the appropriate TurboJPEG binary&nbsp;for your Linux
distribution. &nbsp;TurboJPEG binaries can be found at <a href="https://sourceforge.net/project/showfiles.php?group_id=117509&amp;package_id=166100">https://sourceforge.net/project/showfiles.php?group_id=117509&amp;package_id=166100</a>. &nbsp;These binaries should work on all GLIBC 2.2 and newer systems</li><li>Normally, you should not need to rebuild TurboJPEG from source. &nbsp;But if you do, see the notes below</li></ul><hr>
<h2><span style="font-weight: 400;">Prerequisites - x86-64 Linux</span></h2>
<p>Building a redistributable VirtualGL package for x86-64 requires
building both 32-bit and 64-bit versions of the VirtualGL libraries.
&nbsp;But not all x86-64 Linux systems contain the 32-bit
packages necessary  to rebuild a 32-bit version of VirtualGL.&nbsp; To build
32-bit VirtualGL on an x86-64 Linux system, you will need at minimum
the following 32-bit packages:</p>
<ul>
  <li>glibc development libraries<ul>
    <li>Usually contained in the <span style="font-family: monospace;">glibc-devel</span> package (iX86)</li>
    <li>Usually installed by default on x86-64 Linux systems</li>
  </ul>
  </li>
  <li>X11 dev. kit<ul>
    <li>Usually contained in the <span style="font-family: monospace;">XFree86-devel</span> or <span style="font-family: monospace;">xorg-x11-devel</span> package (iX86)</li>
    <li>Not always installed by default but usually contained on the CD</li>
    <li>Earlier RedHat/Whitebox Enterprise 3 releases do not contain the 32-bit 
    version of the package on the CD, but you can grab it from a 32-bit Enterprise Linux 3 CD, from 
    the RedHat Network, or from the Whitebox web-site.</li>
  </ul>
  </li>
  <li>OpenSSL runtime<ul>
    <li>Usually contained in the <span style="font-family: monospace;">openssl</span> package (iX86)</li>
    <li>Not always installed by default but usually contained on the CD</li>
    <li>May also require 32-bit <span style="font-family: monospace;">krb5-libs</span> package</li>
    <li>Earlier RedHat/Whitebox Enterprise 3 releases do not contain the 32-bit 
    version of the package on the CD, but you can grab it from a 32-bit Enterprise Linux 3 CD, from 
    the RedHat Network, or from the Whitebox web-site.</li>
  </ul>
  </li>
</ul>
<p>Prior to building 32-bit VirtualGL for the first time, you will need to 
perform the following additional step:</p>
<blockquote>
<pre><font face="Courier New">cd /usr/lib<br>ln -fs /lib/libssl.so.? libssl.so</font></pre>
</blockquote>
<p>This creates a development stub for the 32-bit OpenSSL library, since a 
32-bit <span style="font-family: monospace;">openssl-devel</span>
package doesn't exist. &nbsp;If you&nbsp;have more than one 32-bit
version of libssl installed, then replace ? in the above command line
with the version you wish to link against.</p><p>On Enterprise Linux 4.0 or Fedora, you may additionally need to do the 
following:</p>

<pre style="margin-left: 40px;">cd /usr/include/openssl<br>ln -fs opensslconf-x86_64.h opensslconf-i386.h<br></pre>
<p>This creates an appropriate i386 header file for OpenSSL, since  a 
32-bit <span style="font-family: monospace;" class="monospace">openssl-devel</span> package doesn't exist.</p><hr style="width: 100%; height: 2px;"><h2 style="font-weight: normal;">Rebuilding TurboJPEG on Linux</h2><p>TurboJPEG
is a simple but fast JPEG codec that VirtualGL uses as its default
method of image compression. &nbsp;TurboJPEG abstracts a variety of
hardware-specific JPEG compression technologies, some of them closed
source, into a single API that VirtualGL can use across all of the
platforms it supports. &nbsp;The Linux version of TurboJPEG currently
relies on the Intel Integrated Performance Primitives, a proprietary
set of libraries, to achieve the levels of performance necessary to
support VirtualGL. &nbsp;Normally, the TurboJPEG library is built as
part of the VirtualGL build process, but on Linux it was necessary to
split TurboJPEG into a separate RPM so that end users could easily
rebuild VirtualGL from source when needed (such as to install on a
distribution for which no VirtualGL binaries are available.)</p><p>The
source code for TurboJPEG is contained within the VirtualGL build tree
under the&nbsp;<span style="font-style: italic;">jpeg/</span> directory. &nbsp;To rebuild the TurboJPEG library, <span style="font-family: monospace;">cd jpeg</span> and type <span style="font-family: monospace;">make lib</span>. &nbsp;You can then rebuild the TurboJPEG RPM by typing <span style="font-family: monospace;">make dist</span>. &nbsp;Rebuilding TurboJPEG from source requires one of the following:</p><ul><li>Intel Integrated Performance Primitives v4.1 or later. &nbsp;This is the default if the <span style="font-family: monospace;">JPEGLIB</span> makefile option is not specified<br>
    <br>
IPP licenses are available at no charge for non-commercial use and for
a reasonable fee for commercial use. &nbsp;Binaries built by a licensed
IPP user can be distributed royalty-free. &nbsp;See <span style="font-weight: 400;"><a href="http://www.intel.com/software/products/ipp/index.htm">http://www.intel.com/software/products/ipp/index.htm</a> for more details.<br>
&nbsp;</span></li><li>Pegasus Imaging PicTools<br><span style="font-family: monospace;"><br>make JPEGLIB=pegasus lib</span><span style="font-family: monospace;"><br>make JPEGLIB=pegasus dist<br>
&nbsp;</span></li><li>libjpeg v6b<br><span style="font-family: monospace;"><br>make JPEGLIB=libjpeg lib</span><br style="font-family: monospace;"><span style="font-family: monospace;">make JPEGLIB=libjpeg dist</span><br style="font-family: monospace;"><br>This
will produce a version of TurboJPEG based on the Independent JPEG
Group's libjpeg code. &nbsp;This codec is many times slower than
Pegasus or IPP, but it is&nbsp;open source.</li></ul><h3 style="font-weight: normal;">TurboJPEG Makefile Options</h3><span style="font-weight: 400;">Each of these options can be passed as an argument to "make".<br></span><pre><big><span style="font-weight: 400;">IPPDIR = {location of Intel Performance Primitives directory}</span></big></pre>
<blockquote>
  <p><span style="font-weight: 400;">This allows you to override 
  the default location of <span style="font-style: italic;">/opt/intel/ipp41</span>, for instance to use an earlier or 
  later version of IPP.</span></p>
</blockquote>
<pre><big><span style="font-weight: 400;">IPPSHARED = yes</span></big></pre>
<blockquote>
<span style="font-weight: 400;">Link
against the IPP shared libraries rather than the static (merged)
libraries. Using this option has the following ramifications:</span><br>
<span style="font-weight: 400;"></span>
<ul><li><span style="font-weight: 400;">The IPP run-time RPM must be installed on the build machine</span></li><li>The IPP run-time RPM must be installed on any machine that will use TurboJPEG</li><li>TurboJPEG's CPU autodetection mechanism for non-Intel CPU's will no
longer work, and it is likely that the non-optimal (MMX) code path will
be selected for non-Intel CPU's at run time</li></ul></blockquote>See the "Makefile Options" section below for other makefile options that affect the TurboJPEG build.
<hr>
<h2><span style="font-weight: 400;">Prerequisites - Win32</span></h2>
<h3><span style="font-weight: 400;">OpenSSL headers and link libraries</span></h3>

  <ul><li>Windows users should download the latest Win32 OpenSSL installer from
  <a href="http://www.slproweb.com/products/Win32OpenSSL.html">
  http://www.slproweb.com/products/Win32OpenSSL.html</a>.&nbsp; Install it into
  <span style="font-style: italic;">c:\openssl</span>.<br>
  <br>
  <span style="font-style: italic; font-weight: bold;">NOTE:</span>&nbsp; This is 
  only necessary on the build machine.&nbsp; The VirtualGL build system will copy the 
  necessary DLL's into the VirtualGL release package.</li>
    <li>Add <i>c:\openssl\include</i> to your system
    INCLUDE environment variable prior to building 
    VirtualGL. </li>
    <li>Add <i>c:\openssl\lib\VC</span></i> to your system
    LIB environment variable prior to building 
    VirtualGL.</li>
</ul><h3><span style="font-weight: 400;">Visual C++ 2003 or later</span></h3>
<ul>
  <li>Tested with the free Visual C++ 2005 Express Edition (<a href="http://msdn.microsoft.com/vstudio/express/visualc/">http://msdn.microsoft.com/vstudio/express/visualc/</a>)</li>
</ul>
<h3><span style="font-weight: 400">Microsoft Platform SDK</span></h3>
<ul>
  <li>See <a href="http://msdn.microsoft.com/vstudio/express/visualc/usingpsdk/">
  http://msdn.microsoft.com/vstudio/express/visualc/usingpsdk/</a>. </li>
</ul>
<h3><span style="font-weight: 400;">Hummingbird Exceed XDK v8 or later</span></h3>
<ul>
  <li><span class="note"></span>Contact
Gary Romualdez of
Hummingbird Ltd. [tel. (416) 496-6393 or
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#103;&#97;&#114;&#121;&#46;&#114;&#111;&#109;&#117;&#97;&#108;&#100;&#101;&#122;&#64;&#104;&#117;&#109;&#109;&#105;&#110;&#103;&#98;&#105;&#114;&#100;&#46;&#99;&#111;&#109;">&#103;&#97;&#114;&#121;&#46;&#114;&#111;&#109;&#117;&#97;&#108;&#100;&#101;&#122;&#64;&#104;&#117;&#109;&#109;&#105;&#110;&#103;&#98;&#105;&#114;&#100;&#46;&#99;&#111;&#109;</a>]
for Exceed pricing information</li><li>Add the XDK include and lib paths to your system INCLUDE and LIB variables 
  prior to building VirtualGL</li>
  <li>See install notes in the VirtualGL documentation regarding patching Exceed 8 and 9 to 
  eliminate a bug in the MIT-SHM extension</li>
</ul>
<h3><span style="font-weight: 400;">MSYS or Cygwin</span></h3>
<ul>
  <li>VirtualGL's make system is written to take advantage of GNU-specific make 
  semantics and relies upon several 
  Unix-ish shell commands</li>
  <li>MSYS can be downloaded from <a href="http://www.mingw.org/download.shtml">
  http://www.mingw.org/download.shtml</a>.</li>
  <li>Cygwin can be downloaded from <a href="http://www.cygwin.com/">
  http://www.cygwin.com/</a>.</li>
</ul>
<h3><span style="font-weight: 400;">PThreads for Win32</span></h3>
<ul>
  <li>This release of VirtualGL requires the open source PThreads-Win32 package.&nbsp; 
  The 9-18-2003 binary is included in the repository for convenience, as this 
  version has been thoroughly tested and found to be stable with VirtualGL.&nbsp; This 
  binary can also be downloaded from here:
  <a href="http://sources.redhat.com/pthreads-win32/">
  http://sources.redhat.com/pthreads-win32/</a>, along with its associated 
  source code.</li></ul><h3><span style="font-weight: 400;">Intel Integrated 
Performance Primitives (IPP) v4.1 or later <i><font color="#0000ff">[recommended]</font></i></span></h3><ul><li>
  <h4><span style="font-weight: 400;">VirtualGL includes a completely free version of libjpeg v6b which will
   produce correct, albeit slow, behavior.&nbsp; In order to get optimal
   performance out of VirtualGL, however, it is necessary to build VirtualGL 
  against the Intel 
  Performance Primitives, which are capable of compressing JPEG images 3-4x 
  faster than libjpeg.</span></h4>
  </li><li>
  <h4><span style="font-weight: 400">IPP licenses are available at no charge for non-commercial use and for
a reasonable fee for commercial use. &nbsp;Binaries built by a licensed
IPP user can be distributed royalty-free. &nbsp;See <a href="http://www.intel.com/software/products/ipp/index.htm">http://www.intel.com/software/products/ipp/index.htm</a> for more details.</span></h4>
  </li><li>Make sure that the IPP include and lib paths are added to your 
  system INCLUDE and LIB variables.</li>
</ul>
<hr>
<h2><span style="font-weight: 400;">Building</span></h2>
<p>Assuming all of the above is set up correctly, you should be able to just 
type "make".</p>
<hr>
<h2><span style="font-weight: 400;">Makefile Options</span></h2>
<p><span style="font-weight: 400;">Each of these options can be passed as an argument to "make".</span></p>
<pre><big><span style="font-weight: 400;">DEBUG = yes</span></big></pre>
<blockquote>
<p>Build a version of VirtualGL with debugging symbols and no optimization.&nbsp; 
The debug version will reside in <span style="font-style: italic;">${platform}/dbg/lib</span> and <span style="font-style: italic;">${platform}/dbg/bin</span>, whereas 
the release version will reside in <span style="font-style: italic;">${platform}/lib</span> and <span style="font-style: italic;">${platform}/bin</span>, so these 
two versions can be built independently of one another.</p>
</blockquote>
<pre><big><span style="font-weight: 400;">JPEGLIB = &lt; libjpeg | pegasus &gt;<libjpeg |pegasus=""></libjpeg></span></big></pre>
<blockquote>
  <p><span style="font-weight: 400;">libjpeg = Build VirtualGL using a custom version of libjpeg v6b.&nbsp;
               This custom libjpeg code is included in the <i>jpeg/jpeg-6b</i>
               directory and differs from the IJG release (see
               <a href="http://www.ijg.org">http://www.ijg.org</a>) only in its support of 
  little endian 
  and 32-bit pixel formats (both of which are necessary to allow for 
  decompressing directly into X11 shared memory.)</span></p>
  <p><span style="font-weight: 400;">pegasus = Use the PICTools RapidVue codec from Pegasus Imaging
               (<a href="http://www.jpg.com">http://www.jpg.com</a>.)&nbsp; The VirtualGL build environment looks for
               PICTools in a directory called&nbsp;<span style="font-style: italic;">pictools/</span> located one level up
               from the build directory.&nbsp; You can override this by passing
               an additional argument of <span style="font-family: monospace;">PEGDIR={location of pictools directory}</span>.</span></p>
</blockquote><pre><big><span style="font-weight: 400;">M32 = yes</span></big></pre>
<blockquote>
  <p><span style="font-weight: 400;">On x86_64 systems, this cross-compiles a 32-bit 
  (x86) version of VirtualGL.</span></p>
</blockquote>
<hr>
<h2><span style="font-weight: 400;">Installing / Distributing</span></h2>
<p>On Linux, you can type</p>
<div style="margin-left: 40px;"><span style="font-weight: 400; font-family: monospace;">make install [prefix={install prefix}]</span></div>
<p>"prefix" defaults to <i>/usr/local</i> but can be changed to 
something else (e.g. <i>/usr</i>) if 
you prefer.&nbsp; Executables will be installed to <span style="font-style: italic;">$prefix/bin</span>, and libraries 
will be installed to <span style="font-style: italic;">$prefix/lib</span> (or <span style="font-style: italic;">$prefix/lib64</span>, as appropriate.)</p>
<p>To build a redistributable package, type</p>
<div style="margin-left: 40px;"><span style="font-weight: 400; font-family: monospace;">make dist</span></div>
<ul>
  <li>On Linux, this requires RPM v4 or later</li>
  <li>On Windows, this requires the Nullsoft Install System (<a href="http://nsis.sourceforge.net/">http://nsis.sourceforge.net/</a>.)&nbsp; 
  makensis.exe should be in your path.</li>
</ul></body></html>