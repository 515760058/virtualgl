add_library(rrutil STATIC rrlog.cpp genericQ.cpp bmp.c)
if(UNIX)
	target_link_libraries(rrutil pthread)
endif()
if(CMAKE_SYSTEM_NAME STREQUAL "SunOS")
	target_link_libraries(rrutil rt)
endif()

add_library(rrsocket STATIC rrsocket.cpp)
if(UNIX)
	target_link_libraries(rrsocket -lpthread)
elseif(WIN32)
	target_link_libraries(rrsocket wsock32.lib)
endif()
if(VGL_USESSL)
	target_link_libraries(rrsocket ${OPENSSL_LIBRARIES})
endif()
if(${CMAKE_SYSTEM_NAME} MATCHES "SunOS")
	target_link_libraries(rrsocket -lsocket -lxnet)
endif()

add_executable(nettest nettest.cpp)
target_link_libraries(nettest rrsocket)
if(${CMAKE_SYSTEM_NAME} MATCHES "SunOS")
	target_link_libraries(nettest -lkstat)
endif()
install(TARGETS nettest DESTINATION ${VGL_BINDIR})

add_library(fbx STATIC fbx.c)

add_executable(fbxtest fbxtest.cpp)
if(WIN32)
	target_link_libraries(fbxtest fbx rrutil)
else()
	target_link_libraries(fbxtest fbx rrutil -lpthread)
endif()

if(WIN32 AND NOT CYGWIN)
	add_library(fbx-x11 STATIC fbx.c)
	target_link_libraries(fbx-x11 ${X11_X11_LIB} ${X11_Xext_LIB} version.lib)
	set_property(TARGET fbx-x11 APPEND PROPERTY COMPILE_DEFINITIONS FBXX11)

	add_executable(fbxtest-x11 fbxtest.cpp)
	set_property(TARGET fbxtest-x11 APPEND PROPERTY COMPILE_DEFINITIONS FBXX11)
	target_link_libraries(fbxtest-x11 fbx-x11 rrutil)
else()
	target_link_libraries(fbx ${X11_X11_LIB} ${X11_Xext_LIB})
endif()

if(VGL_USEXV)
	add_library(fbxv STATIC fbxv.c)
	target_link_libraries(fbxv ${X11_Xv_LIB} ${X11_X11_LIB} ${X11_Xext_LIB})

	add_executable(fbxvtest fbxvtest.c)
	target_link_libraries(fbxvtest fbxv)
endif()

add_executable(threadtest threadtest.cpp)
if(UNIX)
	target_link_libraries(threadtest pthread)
endif()
if(CMAKE_SYSTEM_NAME STREQUAL "SunOS")
	target_link_libraries(threadtest rt)
endif()

add_executable(glreadtest glreadtest.cpp)
target_link_libraries(glreadtest ${OPENGL_gl_LIBRARY} ${OPENGL_glu_LIBRARY}
	${X11_X11_LIB})
